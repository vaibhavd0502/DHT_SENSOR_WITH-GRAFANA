# Temperature & Humidity Monitoring System (DHT22 + Raspberry Pi + PostgreSQL)

This project sets up a complete temperature & humidity monitoring system using Raspberry Pi, DHT22 sensor, Python scripts, PostgreSQL database, and cron automation.

---

## 1Ô∏è‚É£ Configure Locales & Timezone
```bash
sudo dpkg-reconfigure locales
sudo timedatectl set-timezone Asia/Kolkata
date
sudo locale-gen en_IN.UTF-8
sudo update-locale LANG=en_IN.UTF-8
```

## 2Ô∏è‚É£ Navigate to Project Directory
```bash
cd /home/pun-admin/
ls
cd temp_monitor/
ls
```

## 3Ô∏è‚É£ Install Required Dependencies
```bash
sudo apt update
sudo apt install python3-adafruit-dht -y
sudo apt install python3-pip -y
sudo pip3 install Adafruit_DHT --break-system-packages
```

## 4Ô∏è‚É£ Test Sensor Script
```bash
python3 temp_sensor.py
```

## 5Ô∏è‚É£ Install & Configure PostgreSQL
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib -y
sudo systemctl enable postgresql
sudo systemctl restart postgresql
sudo -u postgres psql
```

### Create table:
```sql
CREATE TABLE public.temp_hum_data (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY,
    data_time TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    tmp REAL NOT NULL,
    hum REAL NOT NULL,
    sid TEXT NOT NULL,
    CONSTRAINT temp_hum_data_pkey PRIMARY KEY (id),
    CONSTRAINT temp_hum_data_sid_unique UNIQUE (data_time, sid),
    CONSTRAINT temp_hum_data_sid_check CHECK ((LENGTH(sid) < 50))
);
```

## 6Ô∏è‚É£ Install PostgreSQL Python Libraries
```bash
sudo apt install python3-psycopg -y
```

## 7Ô∏è‚É£ Run Scripts
```bash
python3 tmpHumDb.py
python3 index.py
```

## 8Ô∏è‚É£ Verify Data
```bash
sudo -u postgres psql
SELECT * FROM temp_hum_data ORDER BY data_time DESC LIMIT 10;
```

## 9Ô∏è‚É£ Cron Job for Auto Logging
Edit cron:
```
crontab -e
```

Add:
```
*/5 * * * * python3 /home/pun-admin/temp_monitor/index.py
```

## üîü PostgreSQL Remote Access (Optional)
Edit:
```bash
sudo nano /etc/postgresql/17/main/postgresql.conf
```
Set:
```
listen_addresses = '*'
```

Edit:
```bash
sudo nano /etc/postgresql/17/main/pg_hba.conf
```

Add:
```
host all all 127.0.0.1/32 scram-sha-256
host all all 10.10.18.10/32 scram-sha-256
```

Restart:
```bash
sudo systemctl restart postgresql
```

---

## üìå Project Files
- temp_sensor.py  
- tmpHumDb.py  
- index.py  
- README.md  
